# Rails復習用掲示板アプリ (Rails Review App)

テックキャンプで学習したRuby on Railsの知識を定着させるために作成した、シンプルな掲示板アプリケーションです。
「Rubyの基礎知識（クラス・メソッド・継承）」と「RailsのMVCの仕組み」を関連付けて理解することを目的としています。

## 📖 概要
ユーザーが投稿を作成、閲覧、編集、削除できる（CRUD機能を持った）アプリケーションです。
基本的なMVCの流れをゼロから構築し、ルーティングには `resources` を、スタイリングには Tailwind CSS を採用しました。

## ✨ 実装した機能
- **投稿機能 (Create)**
  - `form_with` を使用したデータ送信
  - ストロングパラメーターによるセキュリティ対策
  - バリデーション（空投稿の禁止）
- **一覧表示 (Read)**
  - データベースからのデータ取得と `each` メソッドによる表示
  - 作成日時の表示
- **編集・更新機能 (Update)**
  - 投稿内容の再編集
- **削除機能 (Delete)**
  - Turboを使った非同期削除リクエスト
- **デザイン**
  - Tailwind CSS の導入とボタン・レイアウトの装飾
- **日本語化対応 (i18n)**
  - エラーメッセージやDeviseの通知メッセージを日本語化
  - タイムゾーンを日本時間（JST）に設定
- **いいね機能 (非同期通信)**
  - Turbo Stream を活用した、ページリロードなし（Ajax）でのいいね登録・解除
  - ログインユーザーと投稿の多対多のアソシエーション管理
  - 重複いいねの禁止（バリデーション）
- **文字数カウンター (JavaScript / Stimulus)**
  - 入力文字数をリアルタイムでカウントし、残り文字数を表示
  - 文字数超過時のスタイル変更（赤字表示）
- **ページネーション (kaminari)**
  - 投稿一覧のページ送り機能（1ページあたり5件表示）
- **画像投稿機能 (Active Storage)**
  - 投稿への画像添付と一覧表示
  - `with_attached_image` によるN+1問題対策
- **検索機能 (Ransack)**
  - 投稿本文を対象としたキーワード検索
- **ユーザー詳細ページ (マイページ)**
  - ユーザーごとの投稿一覧表示
  - 投稿者名からのリンク遷移
- **画像プレビュー (JavaScript / Stimulus)**
  - ファイル選択時に画像を即時表示するプレビュー機能
- **ユーザーアイコン機能 (Active Storage)**
  - プロフィール画像の登録・編集
  - 画像リサイズ（ImageMagick / MiniMagick）によるアイコン表示
- **いいね一覧ページ**
  - ユーザーがいいねした投稿の一覧表示
  - `has_many :through` を使用した関連データの取得
- **フォロー機能 (相互フォローSNS)**
  - ユーザー同士のフォロー・フォロワー関係の構築（自己結合多対多）
  - Turbo Stream によるフォローボタンとカウント数の非同期更新
- **タイムライン機能**
  - トップページでの「すべての投稿」と「フォロー中の投稿」のタブ切り替え
  - Scopeを利用したフォローユーザーの投稿絞り込み
- **通知機能**
  - 「いいね」や「フォロー」が行われた際の通知作成
  - ヘッダーへの未読バッジ（赤丸）表示と、既読処理の実装
- **レスポンシブデザイン**
  - Tailwind CSS (Grid) を使用した、デバイス幅に応じたレイアウト切り替え
- **デザインの共通化**
  - `@apply` ディレクティブを使用したボタンコンポーネントの作成と再利用
- **メール通知機能 (Action Mailer)**
  - ユーザー登録時のウェルカムメール送信
  - 開発環境でのメール確認ツール（Letter Opener Web）の導入
- **住所自動入力 (外部API連携)**
  - 郵便番号入力時に `zipcloud API` を使用して住所を自動補完
  - Stimulusの `fetch` APIによる非同期通信
- **パンくずリスト (Breadcrumbs)**
  - `gretel` を使用した階層ナビゲーションの表示
- **ゲストログイン機能**
  - 登録不要でワンクリックでログインできる「簡単ログイン」機能
  - `find_or_create_by!` を使用したゲストユーザーの自動生成
- **下書き機能 (Enum)**
  - 記事の「公開」「下書き」ステータス管理
  - `form_with` のパーシャル化（`_form.html.erb`）による、新規・編集フォームの共通化
- **管理者画面 (Rails Admin)**
  - 管理者権限（adminフラグ）を持つユーザーのみアクセス可能な管理パネル
  - データの閲覧・編集・削除・エクスポート機能
- **SEO・OGP設定**
  - `meta-tags` を導入し、動的なタイトルとOGP（シェア用カード情報）を設定


## 🛠 使用技術
- Ruby 3.2.0
- Ruby on Rails 8.1.1
- MySQL
- Tailwind CSS (tailwindcss-rails)
- RSpec (rspec-rails)
- FactoryBot
- Faker
- rails-i18n
- Stimulus (Hotwire)
- RuboCop (静的コード解析)
- kaminari
- Active Storage
- Ransack
- annotaterb (スキーマ情報の自動出力)
- Action Mailer
- Letter Opener Web
- zipcloud API (外部サービス)
- gretel
- Enum (ステータス管理)
- rails_admin
- sprockets-rails (管理画面用のアセット管理)
- meta-tags

## 💡 工夫した点・学んだこと
- **RubyとRailsの繋がり**:
  - コントローラーからビューへのデータ渡しが「インスタンス変数」であることや、モデルが「クラスの継承」であることを意識しながら実装しました。
- **CRUDの理解**:
  - `resources` を使ったルーティングの自動生成と、7つのアクションの役割を整理して実装しました。
- **新しい技術への挑戦**:
  - CSSフレームワークとして Tailwind CSS を導入し、モダンな開発環境構築を経験しました。
- **コードの可読性向上 (DRY)**:
  - コントローラー内の重複するデータ取得処理（`find`）を `before_action` を使って共通化し、コードの記述量を減らして整理しました。
- **コメント機能**
  - 投稿詳細ページでのコメント一覧表示
  - `form_with` のネスト（`[@post, @comment]`）を使用したコメント投稿
  - 1対多のアソシエーション（`has_many`, `belongs_to`）の実装
- **ユーザー認証機能 (Devise)**
  - 会員登録、ログイン、ログアウト
  - ログイン状態によるヘッダー表示の切り替え
- **投稿とユーザーの紐付け**
  - 投稿時に `current_user` を紐付けて保存
  - 投稿一覧への投稿者名（メールアドレス）の表示
- **権限管理・セキュリティ**
  - `authenticate_user!` によるログイン必須制御
  - 投稿者本人のみが編集・削除できる権限ガードの実装
- **品質管理とテスト**:
  - `RSpec` を導入し、モデル（User, Post）の単体テストを作成しました。
  - バリデーションやアソシエーションが正しく機能しているかを自動テストで保証する仕組みを構築しました。
  - `FactoryBot` と `Faker` を活用してテストデータを効率的に生成し、DRYで保守性の高いテストコードを記述しました。
- **ユーザビリティへの配慮**:
  - `rails-i18n` を導入してアプリケーション全体を日本語化し、ユーザーが直感的に操作できるようにしました。
  - タイムゾーンを `Tokyo` に設定し、投稿日時などが正しく日本時間で表示されるように調整しました。
- **ユーザー体験 (UX) の向上**:
  - いいね機能の実装には Rails 7/8 の標準技術である `Turbo` を採用しました。
  - `Turbo Stream` を使ってボタン部分のHTMLだけを差し替えることで、画面遷移のないスムーズな操作感を実現しました。
- **フロントエンド実装**:
  - Rails標準の `Stimulus` を使用し、Reactなどの重厚なフレームワークを使わずに軽量なJavaScript実装を行いました。
  - Railsのビューヘルパー（`data: { ... }`）とHTML属性の変換ルール（`_` → `-`）を理解し、正しくデータ属性を連携させました。
- **コード品質の担保 (Linting)**:
  - `RuboCop` を導入し、Railsの標準的なコーディング規約に準拠したコード記述を徹底しました。
  - **DBレベルの整合性担保**:
    - RuboCopの指摘により、バリデーションだけでなくデータベースレベルでも一意制約（ユニークインデックス）が必要であることを学び、`Like` モデルの中間テーブルに複合ユニークインデックスを追加しました。
- **開発効率化**:
  - `db/seeds.rb` を整備し、`Faker` を使用して検証用ユーザーと投稿データを一括生成できるようにしました。
  - これにより、クローン直後でもすぐにアプリケーションの動作確認が可能な状態を構築しました。
- **CSS設計**:
  - Tailwind CSSの `@apply` を活用して共通のボタンスタイル（.btn-primary等）を定義し、HTML側のクラス記述を削減して可読性を向上させました。