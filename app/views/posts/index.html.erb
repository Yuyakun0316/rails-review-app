<h1>掲示板アプリ</h1>

<!-- 新規投稿フォーム -->
<div style="background-color: #f0f0f0; padding: 15px; margin-bottom: 20px;">
  <h3>新規投稿</h3>
  
  <%# model: @post と書くことで、Postモデル用のフォームだとRailsが判断してくれる %>
  <%= form_with model: @post, url: posts_path, local: true do |f| %>
    
    <%# テキスト入力欄 %>
    <%= f.text_field :content, placeholder: "ここに入力してね" %>
    
    <%# 送信ボタン %>
    <%= f.submit "投稿する", class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>
    
  <% end %>
</div>

<hr>

<h2>投稿一覧</h2>

<%# @posts という配列から、1つずつ post に入れて繰り返す %>
<% @posts.each do |post| %>
  <div style="border: 1px solid #ddd; padding: 10px; margin-bottom: 10px;">

    <!-- 変更後：編集リンクを追加 -->
    <div class="flex justify-between items-center">
      <div>
        <p class="text-lg"><%= post.content %></p>
        <small class="text-gray-500"><%= post.created_at.strftime("%Y/%m/%d %H:%M") %></small>
      </div>
      
      <div class="flex gap-2">
        <%# 編集ボタン %>
        <%# edit_post_path(post) で「その投稿の編集画面」へのURLになる %>
        <%= link_to "編集", edit_post_path(post), class: "text-blue-500 hover:text-blue-700 underline" %>

        <%# 削除ボタン（ここを追加！） %>
        <%# data: { turbo_method: :delete } が「これは削除リクエストだよ」と伝える合図 %>
        <%# data: { turbo_confirm: "..." } で確認ダイアログを出せます %>
        <%= link_to "削除", post_path(post), 
            data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" }, 
            class: "text-red-500 hover:text-red-700 underline" %>
      </div>
    </div>
  </div>
<% end %>